{"ast":null,"code":"var _jsxFileName = \"/Users/josman.perez/Documents/Development/Web/trivia-flexible/src/components/LoginFields.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport * as Realm from \"realm-web\";\nimport { app, client } from \"../index\";\nimport { Navbar, Nav, Button, Form, FormControl } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LoginFields(props) {\n  _s();\n\n  const {\n    loggedIn,\n    setLoggedIn\n  } = props;\n  const {\n    setShowRanking\n  } = props;\n  const {\n    setShowLastGame\n  } = props;\n  const [username, setUsername] = React.useState(app.currentUser ? app.currentUser.profile.email : \"\");\n  const [password, setPassword] = React.useState(\"\"); // Handle login\n\n  async function handleLogin(event) {\n    try {\n      event.preventDefault();\n      const user = await app.logIn(Realm.Credentials.emailPassword(username, password));\n      console.log(\"Successfully email/password logged in!\", user.id);\n      setLoggedIn(app.currentUser ? true : false);\n      await client.clearStore();\n      await client.resetStore();\n    } catch (err) {\n      try {\n        await app.emailPasswordAuth.registerUser(username, password);\n        const user = await app.logIn(Realm.Credentials.emailPassword(username, password));\n        console.log(\"Successfully email/password logged in!\", user.id);\n        setLoggedIn(app.currentUser ? true : false);\n        await client.clearStore();\n        await client.resetStore();\n      } catch (error) {\n        console.error(\"Failed to log in\", error.message);\n        alert(`Ops!, ${error.error}`);\n      }\n    }\n  } // Handle logout\n\n\n  async function handleLogout() {\n    try {\n      const user = app.currentUser;\n\n      if (user.id === app.currentUser.id) {\n        app.currentUser.logOut();\n        await app.removeUser(user);\n      }\n\n      setLoggedIn(app.currentUser ? true : false);\n    } catch (err) {\n      console.error(\"Failed to logout\", err.message);\n    }\n  }\n\n  function validateForm() {\n    return username.length > 0 && password.length > 0;\n  }\n\n  return /*#__PURE__*/_jsxDEV(Navbar, {\n    bg: \"dark\",\n    expand: \"lg\",\n    variant: \"dark\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar.Brand, {\n      href: \"#home\",\n      children: loggedIn ? `Signed in as: ${username}` : \"Please, Login or Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Navbar.Toggle, {\n      \"aria-controls\": \"navbarScroll\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Navbar.Collapse, {\n      className: \"justify-content-start\",\n      children: [/*#__PURE__*/_jsxDEV(Nav, {\n        className: \"mr-auto\",\n        children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n          children: loggedIn && /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setShowRanking(true),\n            variant: \"secondary\",\n            disabled: !loggedIn,\n            children: \"Ranking\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Nav.Link, {\n          children: loggedIn && /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setShowLastGame(true),\n            variant: \"secondary\",\n            disabled: !loggedIn,\n            children: \"Game Stats\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        className: \"d-flex\",\n        inline: true,\n        onSubmit: handleLogin,\n        children: [/*#__PURE__*/_jsxDEV(FormControl, {\n          type: \"text\",\n          placeholder: \"Enter email\",\n          className: \"mr-sm-2\",\n          value: username,\n          onChange: e => setUsername(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          type: \"password\",\n          placeholder: \"Password\",\n          className: \"mr-sm-2\",\n          value: password,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), loggedIn ? /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleLogout,\n          variant: \"secondary\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 14\n        }, this) : /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"success\",\n          disabled: !validateForm(),\n          children: \"Login/Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LoginFields, \"tFl8sQrolLVV22mn25tEzcGNKJM=\");\n\n_c = LoginFields;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginFields\");","map":{"version":3,"names":["React","Realm","app","client","Navbar","Nav","Button","Form","FormControl","LoginFields","props","loggedIn","setLoggedIn","setShowRanking","setShowLastGame","username","setUsername","useState","currentUser","profile","email","password","setPassword","handleLogin","event","preventDefault","user","logIn","Credentials","emailPassword","console","log","id","clearStore","resetStore","err","emailPasswordAuth","registerUser","error","message","alert","handleLogout","logOut","removeUser","validateForm","length","e","target","value"],"sources":["/Users/josman.perez/Documents/Development/Web/trivia-flexible/src/components/LoginFields.js"],"sourcesContent":["import React from \"react\";\nimport * as Realm from \"realm-web\";\nimport {\n  app,\n  client\n} from \"../index\";\nimport {\n  Navbar,\n  Nav,\n  Button,\n  Form,\n  FormControl\n} from \"react-bootstrap\";\n\nexport default function LoginFields(props) {\n\n  const { loggedIn, setLoggedIn } = props;\n  const { setShowRanking } = props;\n  const { setShowLastGame } = props;\n\n  const [username, setUsername] = React.useState(\n    app.currentUser ? app.currentUser.profile.email : \"\"\n  );\n  const [password, setPassword] = React.useState(\"\");\n\n  // Handle login\n  async function handleLogin(event) {\n    try {\n      event.preventDefault();\n      const user = await app.logIn(Realm.Credentials.emailPassword(username, password));\n      console.log(\"Successfully email/password logged in!\", user.id);\n      setLoggedIn(\n        app.currentUser ? true : false\n      );\n      await client.clearStore()\n      await client.resetStore()\n    } catch (err) {\n      try {\n        await app.emailPasswordAuth.registerUser(username, password);\n        const user = await app.logIn(Realm.Credentials.emailPassword(username, password));\n        console.log(\"Successfully email/password logged in!\", user.id);\n        setLoggedIn(\n          app.currentUser ? true : false\n        );\n        await client.clearStore()\n        await client.resetStore()\n      } catch (error) {\n        console.error(\"Failed to log in\", error.message);\n        alert(`Ops!, ${error.error}`);\n      }\n    }\n  }\n\n  // Handle logout\n  async function handleLogout() {\n    try {\n      const user = app.currentUser;\n      if (user.id === app.currentUser.id) {\n        app.currentUser.logOut();\n        await app.removeUser(user);\n      }\n      setLoggedIn(\n        app.currentUser ? true : false\n      );\n    } catch (err) {\n      console.error(\"Failed to logout\", err.message);\n    }\n  }\n\n  function validateForm() {\n    return username.length > 0 && password.length > 0;\n  }\n\n  return (\n    <Navbar bg=\"dark\" expand=\"lg\" variant=\"dark\">\n      <Navbar.Brand href=\"#home\">\n        {loggedIn ? (`Signed in as: ${username}`) : (\"Please, Login or Register\")}\n      </Navbar.Brand>\n      <Navbar.Toggle aria-controls=\"navbarScroll\" />\n      <Navbar.Collapse className=\"justify-content-start\">\n        <Nav className=\"mr-auto\">\n          <Nav.Link>\n            {loggedIn &&\n              <Button\n                onClick={() => setShowRanking(true)}\n                variant=\"secondary\"\n                disabled={!loggedIn}>Ranking\n              </Button>\n            }\n          </Nav.Link>\n          <Nav.Link>\n            {loggedIn &&\n              <Button\n                onClick={() => setShowLastGame(true)}\n                variant=\"secondary\"\n                disabled={!loggedIn}>Game Stats\n              </Button>\n            }\n          </Nav.Link>\n        </Nav>\n        <Form className=\"d-flex\" inline onSubmit={handleLogin}>\n          <FormControl\n            type=\"text\"\n            placeholder=\"Enter email\"\n            className=\"mr-sm-2\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)} />\n          <FormControl\n            type=\"password\"\n            placeholder=\"Password\"\n            className=\"mr-sm-2\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)} />\n          {loggedIn ?\n            (<Button onClick={handleLogout} variant=\"secondary\">Logout</Button>) :\n            (<Button type=\"submit\" variant=\"success\" disabled={!validateForm()}>Login/Register</Button>)}\n        </Form>\n      </Navbar.Collapse>\n    </Navbar>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}