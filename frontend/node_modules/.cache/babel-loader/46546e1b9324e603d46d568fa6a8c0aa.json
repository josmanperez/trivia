{"ast":null,"code":"import _regeneratorRuntime from\"/Users/josman.perez/Documents/Development/Web/trivia-flexible/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/josman.perez/Documents/Development/Web/trivia-flexible/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/josman.perez/Documents/Development/Web/trivia-flexible/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/josman.perez/Documents/Development/Web/trivia-flexible/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/josman.perez/Documents/Development/Web/trivia-flexible/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/josman.perez/Documents/Development/Web/trivia-flexible/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/josman.perez/Documents/Development/Web/trivia-flexible/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import*as React from\"react\";import{app}from\"../index\";import{Button,Col,Container,Modal,Row,Spinner}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GameStats=/*#__PURE__*/function(_React$Component){_inherits(GameStats,_React$Component);var _super=_createSuper(GameStats);function GameStats(props){var _this;_classCallCheck(this,GameStats);_this=_super.call(this,props);_this.handleClose=function(){return _this.props.setShow(false);};_this.getStats=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var user,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;user=app.currentUser;if(!(user.id===app.currentUser.id)){_context.next=9;break;}_context.next=5;return app.currentUser.functions.getLastGameStats(user.id);case 5:result=_context.sent;_this.addStats(result);_context.next=11;break;case 9:alert(\"No user found\");_this.handleClose();case 11:_this.toggleLoading();_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.error(\"Issue uppdating user game:\",_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));_this.getStats();_this.state={loading:true,stats:{}};_this.toggleLoading=_this.toggleLoading.bind(_assertThisInitialized(_this));_this.addStats=_this.addStats.bind(_assertThisInitialized(_this));return _this;}_createClass(GameStats,[{key:\"toggleLoading\",value:function toggleLoading(){this.setState({loading:false});}},{key:\"addStats\",value:function addStats(game){this.setState({stats:game});}},{key:\"isEmpty\",value:function isEmpty(obj){return Object.keys(obj).length===0;}},{key:\"drawStats\",value:function drawStats(){if(this.state.stats===\"{}\"){return/*#__PURE__*/_jsx(Row,{className:\"ranking-position\",style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(Col,{children:\"No games yet\"})});}else{var game=this.state.stats.games;return/*#__PURE__*/_jsxs(Container,{style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats topGameStats\",children:[/*#__PURE__*/_jsx(Row,{style:{marginBottom:\"2em\"},children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h4\",{children:\"Last Played Game\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h5\",{children:game.category})})}),/*#__PURE__*/_jsxs(Row,{className:\"ranking-position\",children:[/*#__PURE__*/_jsx(Col,{children:game.asserts}),/*#__PURE__*/_jsx(Col,{children:game.fails})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Rights\"}),/*#__PURE__*/_jsx(Col,{children:\"Wrongs\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats gameResult\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{style:{textTransform:\"uppercase\"},children:/*#__PURE__*/_jsx(\"h4\",{children:game.asserts>game.fails?\"Won\":\"Lost\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:new Date(game.timeElapsed*1000).toISOString().substr(11,8)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats gameStats\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Statistics\"})})}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"left\"},children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Number of won games:\"}),/*#__PURE__*/_jsx(Col,{style:{textAlign:\"center\"},children:this.state.stats.individualWonGames})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Number of lost games:\"}),/*#__PURE__*/_jsx(Col,{style:{textAlign:\"center\"},children:this.state.stats.total-this.state.stats.individualWonGames})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Number of games played:\"}),/*#__PURE__*/_jsx(Col,{style:{textAlign:\"center\"},children:this.state.stats.total})]})]})]})]});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Modal,{size:\"lg\",show:this.props.show,onHide:this.handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Game Statistics\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:this.state.loading?/*#__PURE__*/_jsx(Spinner,{className:\"loader\",animation:\"border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Loading...\"})}):/*#__PURE__*/_jsx(Container,{children:this.drawStats()})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:this.handleClose,children:\"Close\"})})]});}}]);return GameStats;}(React.Component);export{GameStats as default};","map":{"version":3,"names":["React","app","Button","Col","Container","Modal","Row","Spinner","GameStats","props","handleClose","setShow","getStats","user","currentUser","id","functions","getLastGameStats","result","addStats","alert","toggleLoading","console","error","state","loading","stats","bind","setState","game","obj","Object","keys","length","textAlign","games","marginBottom","category","asserts","fails","textTransform","Date","timeElapsed","toISOString","substr","individualWonGames","total","show","drawStats","Component"],"sources":["/Users/josman.perez/Documents/Development/Web/trivia-flexible/src/components/GameStats.js"],"sourcesContent":["import * as React from \"react\";\nimport { app } from \"../index\";\nimport {\n  Button,\n  Col,\n  Container,\n  Modal,\n  Row,\n  Spinner\n} from 'react-bootstrap';\n\nexport default class GameStats extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.getStats();\n    this.state = { loading: true, stats: {} }\n    this.toggleLoading = this.toggleLoading.bind(this);\n    this.addStats = this.addStats.bind(this);\n  }\n\n  handleClose = () => this.props.setShow(false);\n\n  toggleLoading() {\n    this.setState({ loading: false });\n  }\n\n  addStats(game) {\n    this.setState({ stats: game })\n  }\n\n  getStats = async () => {\n    try {\n      const user = app.currentUser;\n      if (user.id === app.currentUser.id) {\n        const result = await app.currentUser.functions.getLastGameStats(user.id);\n        this.addStats(result);\n      } else {\n        alert(\"No user found\");\n        this.handleClose()\n      }\n      this.toggleLoading();\n    } catch (error) {\n      console.error(\"Issue uppdating user game:\", error);\n    }\n  }\n\n  isEmpty(obj) {\n    return Object.keys(obj).length === 0;\n  }\n\n  drawStats() {\n    if (this.state.stats === \"{}\") {\n      return (\n        <Row\n          className=\"ranking-position\"\n          style={{ textAlign: \"center\" }}>\n          <Col>\n            No games yet\n          </Col>\n        </Row>\n      )\n    } else {\n      const game = this.state.stats.games;\n      return (\n        <Container style={{ textAlign: \"center\" }}>\n          <div className=\"stats topGameStats\">\n            <Row style={{ marginBottom: \"2em\" }}>\n              <Col>\n                <h4>Last Played Game</h4>\n              </Col>\n            </Row>\n            <Row>\n              <Col>\n                <h5>\n                  {game.category}\n                </h5>\n              </Col>\n            </Row>\n            <Row className=\"ranking-position\">\n              <Col>\n                {game.asserts}\n              </Col>\n              <Col>\n                {game.fails}\n              </Col>\n            </Row>\n            <Row>\n              <Col>\n                Rights\n              </Col>\n              <Col>\n                Wrongs\n              </Col>\n            </Row>\n          </div>\n          <div className=\"stats gameResult\">\n            <Row>\n              <Col style={{ textTransform: \"uppercase\" }}>\n                <h4>{game.asserts > game.fails ? (\"Won\") : (\"Lost\")}</h4>\n              </Col>\n            </Row>\n            <Row>\n              <Col>\n                {new Date(game.timeElapsed * 1000).toISOString().substr(11, 8)}\n              </Col>\n            </Row>\n          </div>\n          <div className=\"stats gameStats\">\n            <Row>\n              <Col>\n                <h3>Statistics</h3>\n              </Col>\n            </Row>\n            <div style={{ textAlign: \"left\" }}>\n              <Row>\n                <Col>\n                  Number of won games:\n                </Col>\n                <Col style={{ textAlign: \"center\" }}>\n                  {this.state.stats.individualWonGames}\n                </Col>\n              </Row>\n              <Row>\n                <Col>\n                  Number of lost games:\n                </Col>\n                <Col style={{ textAlign: \"center\" }}>\n                  {this.state.stats.total - this.state.stats.individualWonGames}\n                </Col>\n              </Row>\n              <Row>\n                <Col>\n                  Number of games played:\n                </Col>\n                <Col style={{ textAlign: \"center\" }}>\n                  {this.state.stats.total}\n                </Col>\n              </Row>\n            </div>\n          </div>\n        </Container>\n      )\n    }\n  }\n\n  render() {\n    return <Modal size=\"lg\" show={this.props.show} onHide={this.handleClose}>\n      <Modal.Header closeButton>\n        <Modal.Title>Game Statistics</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        {this.state.loading ?\n          (<Spinner\n            className=\"loader\"\n            animation=\"border\"\n            role=\"status\">\n            <span className=\"sr-only\">Loading...</span>\n          </Spinner>) :\n          (<Container>\n            {this.drawStats()}\n          </Container>)}\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={this.handleClose}>\n          Close\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}